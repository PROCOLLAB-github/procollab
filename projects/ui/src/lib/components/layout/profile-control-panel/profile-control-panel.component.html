<!-- @format -->

<div class="control-panel">
  <div class="control-panel__actions">
    <div class="control-panel__action" (click)="showNotifications = true">
      <div (clickOutside)="onClickOutside()" class="control-panel__bell">
        @if (hasNotifications || hasInvites) {
        <div class="attention"></div>
        }
        <i appIcon icon="bell" appWidth="15" appHeight="17" appViewBox="0 0 15 17"></i>
      </div>
    </div>
    @if (showNotifications) {
    <div class="control-panel__notifications notifications">
      <p class="text-body-12 notifications__title">Уведомления</p>
      <ul class="notifications__invites">
        @for (invite of invites; track invite.id) {
        <li class="notifications__invite">
          <app-invite-manage-card
            [invite]="invite"
            (accept)="acceptInvite.emit($event)"
            (reject)="rejectInvite.emit($event)"
          ></app-invite-manage-card>
        </li>
        }
      </ul>
    </div>
    }
    <a class="control-panel__action" (click)="logout.emit()">
      <div class="control-panel__bell">
        <i appIcon icon="logout3" appWidth="15" appHeight="17"></i>
      </div>
    </a>
  </div>
  @if (user) {
  <app-profile-info
    class="control-panel__profile"
    [user]="user"
    (logout)="logout.emit()"
  ></app-profile-info>
  }
</div>
