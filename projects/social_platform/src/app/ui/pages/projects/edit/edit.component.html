<!-- @format -->
<div>
  <div class="project__top">
    <div class="project__back" [routerLink]="'/office/projects/' + profileId()">
      <i appIcon icon="left-arrow" appSquare="24"></i>
      <h1 class="project__title">—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h1>
    </div>
    <div class="project__save">
      <app-button
        size="medium"
        customTypographyClass="text-body-12"
        color="red"
        (click)="deleteProject()"
      >
        —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
      </app-button>
      <app-button
        size="medium"
        customTypographyClass="text-body-12"
        appearance="outline"
        [loader]="projFormIsSubmittingAsDraft()"
        (click)="saveProjectAsDraft()"
      >
        —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
      </app-button>
      <app-button
        size="medium"
        customTypographyClass="text-body-12"
        [loader]="projFormIsSubmittingAsPublished()"
        (click)="saveProjectAsPublished()"
      >
        {{ isCompetitive() ? "–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É" : "—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å" }}
      </app-button>
    </div>
  </div>

  <main class="project">
    <form [formGroup]="projectForm" class="project__form">
      <app-project-navigation
        [navItems]="navProjectItems"
        style="width: 100%"
        (stepChange)="navigateStep($event)"
      ></app-project-navigation>

      <div class="project__inner">
        @if (editingStep() === "main") {
        <app-project-main-step
          style="width: 100%"
          [projSubmitInitiated]="projSubmitInitiated()"
        ></app-project-main-step>
        } @else if (editingStep() === "contacts") {
        <app-project-partner-resources-step
          style="width: 100%"
        ></app-project-partner-resources-step>
        } @else if (editingStep() === "achievements") {
        <app-project-achievement-step
          style="width: 100%"
          [projSubmitInitiated]="projSubmitInitiated()"
        ></app-project-achievement-step>
        } @else if (editingStep() === "vacancies"){
        <app-project-vacancy-step style="width: 100%"></app-project-vacancy-step>
        } @else if (editingStep() === "team") {
        <app-project-team-step style="width: 100%"></app-project-team-step>
        } @else if (editingStep() === "additional") {
        <app-project-additional-step
          #additionalStepComponent
          style="width: 100%"
        ></app-project-additional-step>
        }
      </div>
    </form>
    <app-modal
      [open]="
        (projectForm.invalid || additionalForm.invalid) &&
        projSubmitInitiated() &&
        !warningModalSeen()
      "
    >
      <div class="project__warning-modal">
        <h3 class="text-bold-body-16">üì¢ –≤–Ω–∏–º–∞–Ω–∏–µ!</h3>
        <p class="text-body-14">
          –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ <strong>–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è</strong> (–æ–Ω–∏ –±—É–¥—É—Ç
          <strong>–ø–æ–¥—Å–≤–µ—á–µ–Ω—ã&nbsp;<span>–∫—Ä–∞—Å–Ω—ã–º</span></strong
          >). –ï—Å–ª–∏ –≤—ã –ø–æ–∫–∞ –Ω–µ –∑–Ω–∞–µ—Ç–µ —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å, –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è
          –ø–æ–∑–∂–µ :&#41;

          {{
            fromProgram() || isProjectAssignToProgram()
              ? '—Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å –≤–∫–ª–∞–¥–∫—É "–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω–∫—É—Ä—Å–æ–≤"'
              : ""
          }}
        </p>
        <app-button
          size="medium"
          customTypographyClass="text-body-12"
          appearance="outline"
          (click)="closeWarningModal()"
          >–ø–æ–Ω—è—Ç–Ω–æ</app-button
        >
      </div>
    </app-modal>
  </main>
</div>

<app-modal [open]="isCompleted()" (openChange)="isCompleted.set(!isCompleted())">
  <div class="cancel">
    <div class="cancel__top">
      <i (click)="isCompleted.set(false)" appIcon icon="cross" class="cancel__cross"></i>
      <p class="cancel__title text-bold-body-16">–ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!</p>
    </div>

    <img alt="end" src="assets/images/projects/detail/end.svg" class="cancel__img" />

    <p class="text-body-14 cancel__text">
      –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –±—ã–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º—ã {{ errorModalMessage()?.program_name }}.
      –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ.
    </p>
  </div>
</app-modal>

<app-modal
  [open]="isSendDescisionLate()"
  (openChange)="isSendDescisionLate.set(!isSendDescisionLate())"
>
  <div class="cancel" style="width: 605px; padding: 0px 24px">
    <div class="cancel__top">
      <i (click)="isSendDescisionLate.set(false)" appIcon icon="cross" class="cancel__cross"></i>
      <p class="cancel__title text-body-14">–ü–æ–¥–∞—á–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</p>
    </div>

    <p class="text-body-12">–°—Ä–æ–∫ –ø–æ–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É –∑–∞–≤–µ—Ä—à—ë–Ω</p>
  </div>
</app-modal>

<app-modal [open]="fromProgramOpen()" (openChange)="fromProgramOpen.set(false)">
  <div class="cancel" style="width: 605px; padding: 0px 24px">
    <div class="cancel__top">
      <p class="cancel__title text-body-14">–ù–∞—á–Ω–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é!</p>
    </div>

    <div class="cancel__text-block">
      <p class="text-body-12">
        –í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π ‚Äì –∑–¥–µ—Å—å –º—ã —Å –Ω—É–ª—è —Å–æ–∑–¥–∞–µ–º –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç–Ω—ã–µ –∏–¥–µ–∏
      </p>

      <p class="text-body-12">
        –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∫–ª–∞–¥–æ–∫ ‚Äì –∑–∞–ø–æ–ª–Ω–∏–≤ –∫–∞–∂–¥—É—é, –≤—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç.<br />
        –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –æ—Ç–º–µ—á–µ–Ω—ã –∫—Ä–∞—Å–Ω—ã–º, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–µ –∑–∞–±—É–¥—å –ø—Ä–æ –≤–∫–ª–∞–¥–∫—É ¬´–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω–∫—É—Ä—Å–æ–≤¬ª
      </p>

      <p class="text-body-12">
        –ë—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã: –ø—Ä–æ–µ–∫—Ç –µ–¥–∏–Ω–æ–∂–¥—ã —Å–æ–∑–¥–∞–µ—Ç—Å—è –ª–∏–¥–µ—Ä–æ–º, –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç—Å—è –≤ —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π
        –ø—Ä–æ–µ–∫—Ç
      </p>

      <p class="text-body-12">
        –ï—Å–ª–∏ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∂–¥—É—é –≥—Ä–∞—Ñ—É –ø–æ–∫–∞ –Ω–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ (–∏–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏!),
        –Ω–∞–∂–º–∏—Ç–µ ¬´—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫¬ª ‚Äì —Ç–∞–∫ –≤—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç, –Ω–æ –Ω–µ –æ–ø—É–±–ª–∏–∫—É–µ—Ç–µ –µ–≥–æ –¥–ª—è
        –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤—Å–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
      </p>

      <p class="text-body-12">–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –º–∏—Ä—É –æ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ!</p>
    </div>

    <app-button
      customTypographyClass="text-body-12"
      size="medium"
      (click)="fromProgramOpen.set(false)"
      >–≤–ø–µ—Ä–µ–¥</app-button
    >
  </div>
</app-modal>

<app-modal
  [open]="isSendDescisionToPartnerProgramProject()"
  (openChange)="
    isSendDescisionToPartnerProgramProject.set(!isSendDescisionToPartnerProgramProject())
  "
>
  <div class="cancel" style="width: 100%; padding: 40px 20px 20px">
    <div class="cancel__top">
      <i
        (click)="isSendDescisionToPartnerProgramProject.set(false)"
        appIcon
        icon="cross"
        class="cancel__cross"
      ></i>
      <img alt="end" src="assets/images/projects/detail/bid.svg" class="cancel__img" />
      <h4 class="cancel__title text-heading-4">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É?</h4>
    </div>

    <p class="text-body-12 cancel__text">
      –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫—É –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä—Å–∞.
      <br />–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É —Å–µ–π—á–∞—Å?
    </p>

    <div class="cancel__buttons">
      <app-button
        size="medium"
        customTypographyClass="text-body-12"
        color="grey"
        (click)="isSendDescisionToPartnerProgramProject.set(false)"
        >–û—Ç–º–µ–Ω–∞</app-button
      >
      <app-button
        size="medium"
        customTypographyClass="text-body-12"
        (click)="closeSendingDescisionModal()"
        >–û—Ç–ø—Ä–∞–≤–∏—Ç—å</app-button
      >
    </div>
  </div>
</app-modal>
