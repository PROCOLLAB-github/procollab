<!-- @format -->
<form [formGroup]="form" class="rating">
  <section class="rating__columns">
    @for (criterion of criteria; track $index) { @if (criterion.type === "int") {
    <div class="rating__field">
      <app-range-criterion-input
        class="rating__input"
        [max]="criterion.maxValue!"
        [formControlName]="criterion.id"
        [disabled]="disabled"
      ></app-range-criterion-input>
      <label class="text-body-10">{{ criterion.name }}</label>
    </div>
    } @if (criterion.type === "bool") {
    <div class="rating__field">
      <app-boolean-criterion
        class="rating__input"
        [formControlName]="criterion.id"
        [disabled]="disabled"
      ></app-boolean-criterion>
      <label class="text-body-10">{{ criterion.name }}</label>
    </div>
    } }
  </section>
  <section>
    @for (criterion of criteria; track $index) { @if (criterion.type === "str") {
    <div class="rating__comment">
      <app-textarea
        size="big"
        [formControlName]="criterion.id"
        placeholder="Небольшой комментарий, если необходимо"
        [maxLength]="50"
      ></app-textarea>

      @if (form.get(criterion.id.toString())?.errors?.['maxlength']) {
      <div class="text-body-10 error">
        {{ errorMessage.VALIDATION_TOO_LONG }}
        максимум
        {{ form.get(criterion.id.toString())?.errors?.['maxlength']?.['requiredLength'] }} символов
      </div>
      }
    </div>
    } }
  </section>
</form>
