<!-- @format -->

<main class="page">
  <div class="page__bar">
    <app-back namespace="проекты" path="/office/projects/main"></app-back>

    <div class="page__info">
      <div class="page__outlet">
        <form [formGroup]="searchForm">
          <app-search formControlName="search"></app-search>
        </form>

        <app-bar-new
          [links]="[
            {
              link: '/office/projects/my',
              linkText: 'Мои проекты',
              iconName: 'main',
              isRouterLinkActiveOptions: false,
            },

            {
              link: '/office/projects/subscriptions',
              linkText: 'Мои подписки',
              iconName: 'favourites',
              isRouterLinkActiveOptions: false,
            },

            {
              link: '/office/projects/invites',
              linkText: 'Мои приглашения',
              iconName: 'send',
              isRouterLinkActiveOptions: false,
            },

            {
              link: '/office/projects/all',
              linkText: 'Все проекты',
              iconName: 'folders',
              isRouterLinkActiveOptions: false,
            },
          ]"
        >
        </app-bar-new>

        <router-outlet></router-outlet>
      </div>

      <div class="page__create" [style.gap]="isMy ? '20px' : '0px'">
        <app-button
          size="medium"
          (click)="addProject()"
          customTypographyClass="text-body-12 bar__add-project"
        >
          <span class="bar__add-project-text text-body-12">создать проект</span>
          <i appIcon icon="plus" appSquare="10"></i>
        </app-button>

        <div class="page__left">
          @if (isMy) {
          <app-soon-card
            title="статистика"
            description="количество проектов, команды, эффективность"
          >
          </app-soon-card>
          } @if (isAll) {
          <div class="filter page__filter" [class.page__filter--open]="isFilterOpen">
            <div class="filter__overlay" (click)="isFilterOpen = false"></div>
            <div class="filter__body" #filterBody>
              <div
                class="filter__bar"
                (touchstart)="onSwipeStart($event)"
                (touchmove)="onSwipeMove($event)"
                (touchend)="onSwipeEnd($event)"
              ></div>
              <app-projects-filter (closeFilter)="closeFilter()"></app-projects-filter>
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</main>
