<!-- @format -->

<div class="file" [class.file--loading]="loading" [class.file--error]="error">
  @if (src && !loading && !error) {
  <img [src]="src" alt="user-generated content" class="file__img" />
  } @if (error) {
  <div class="file__error loading-error">
    <div class="loading-error__message text-body-12">
      <i appIcon icon="color-error" appSquare="14"></i>
      Ошибка загрузки
    </div>
    <i
      appIcon
      icon="reload"
      appSquare="22"
      class="loading-error__reload"
      (click)="retry.emit()"
    ></i>
  </div>
  } @if (loading) {
  <svg
    class="file__loader"
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      fill="none"
      stroke="currentColor"
      stroke-dasharray="15"
      stroke-dashoffset="15"
      stroke-linecap="round"
      stroke-width="2"
      d="M12 3C16.9706 3 21 7.02944 21 12"
    >
      <animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0" />
      <animateTransform
        attributeName="transform"
        dur="1.5s"
        repeatCount="indefinite"
        type="rotate"
        values="0 12 12;360 12 12"
      />
    </path>
  </svg>
  }
  <div class="file__cross" (click)="cancel.emit()">
    <i appIcon icon="cross" appSquare="22"></i>
  </div>
</div>
