<!-- @format -->

<div class="card" [class.card--last]="isLast" [class.card--unread]="unread | async">
  <div class="card__row">
    <app-avatar
      class="card__avatar"
      [isOnline]="chat.opponent ? chat.opponent.isOnline : false"
      [url]="chat.imageAddress"
      [size]="60"
    ></app-avatar>
    <div class="card__body">
      <div class="card__name text-body-16">
        {{ chat.name }}
      </div>
      @if (chat.lastMessage && chat.lastMessage.text) {
      <div class="card__last-message">
        <app-avatar
          class="card__last-user"
          [url]="chat.lastMessage.author.avatar"
          [size]="25"
        ></app-avatar>
        <div class="card__last-text text-body-12">{{ chat.lastMessage.text }}</div>
      </div>
      }
    </div>
  </div>
  @if (chat.lastMessage && chat.lastMessage.text) {
  <div class="card__right text-body-14">
    <p>{{ chat.lastMessage.createdAt | dayjs: "format":"DD MMMM" }}</p>
    @if (unread | async) {
    <div class="card__unreads"></div>
    }
  </div>
  }
</div>
