<!-- @format -->

<div class="auth register">
  <div class="auth__greeting">
    <h3 class="auth__title auth__title--register">
      <ng-container *ngIf="step === 'credentials'">
        –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ Procollab!&nbsp;üëã<br>
        –° –Ω–∞–º–∏ –∏–¥–µ–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é&nbsp;üöÄ
      </ng-container>
      <ng-container *ngIf="step === 'info'">
        PROCOLLAB - —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –Ω–æ –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Å–∞–º—ã—Ö –∑–∞—Ä—è–∂–µ–Ω–Ω—ã—Ö —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ –∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
      </ng-container>
    </h3>
    <p class="auth__info">
      <ng-container *ngIf="step === 'credentials'">
        –î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ
      </ng-container>
      <ng-container *ngIf="step === 'info'">
        –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–µ–±–µ, —á—Ç–æ–±—ã –º—ã –∑–Ω–∞–ª–∏, –∫–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è
      </ng-container>
    </p>
  </div>
  <form class="auth__wrapper" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <ng-container *ngIf="step === 'credentials'">
      <fieldset *ngIf="registerForm.get('email') as email" class="auth__field">
        <label for="email" class="field-label">–ü–æ—á—Ç–∞</label>
        <app-input
          [error]="email | controlError"
          id="email"
          type="email"
          formControlName="email"
          placeholder="mail@example.ru"
        ></app-input>
        <div *ngIf="email | controlError: 'required'" class="text-body-14 error">
          {{ errorMessage.VALIDATION_REQUIRED }}
        </div>
        <div *ngIf="email | controlError: 'email'" class="text-body-14 error">
          {{ errorMessage.VALIDATION_EMAIL }}
        </div>
      </fieldset>
      <fieldset *ngIf="registerForm.get('password') as password" class="auth__field">
        <label for="passowrd" class="field-label">–ü–∞—Ä–æ–ª—å</label>
        <app-input
          [error]="password | controlError"
          id="passowrd"
          type="password"
          formControlName="password"
          placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å"
        ></app-input>
        <app-input
          class="register__repeated-password"
          [error]="password | controlError"
          id="repeatedPassword"
          type="password"
          formControlName="repeatedPassword"
          placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
        ></app-input>
        <div *ngIf="password | controlError: 'required'" class="text-body-14 error">
          {{ errorMessage.VALIDATION_REQUIRED }}
        </div>
        <div *ngIf="password | controlError: 'minlength'" class="text-body-14 error">
          {{ errorMessage.VALIDATION_TOO_SHORT }} {{ password.errors?.minlength.requiredLength }}
        </div>
        <div *ngIf="registerForm | controlError: 'unMatch'" class="text-body-14 error">
          {{ errorMessage.VALIDATION_PASSWORD_UNMATCH }}
        </div>
      </fieldset>
    </ng-container>
    <ng-container *ngIf="step === 'info'">
      <div class="auth__row">
        <fieldset *ngIf="registerForm.get('firstName') as name" class="auth__field">
          <label for="name" class="field-label">–ò–º—è</label>
          <app-input
            [error]="name | controlError"
            id="name"
            type="text"
            formControlName="firstName"
            placeholder="–ò–≤–∞–Ω"
          ></app-input>
          <div *ngIf="name | controlError: 'required'" class="text-body-14 error">
            {{ errorMessage.VALIDATION_REQUIRED }}
          </div>
        </fieldset>
        <fieldset *ngIf="registerForm.get('lastName') as surname" class="auth__field">
          <label for="surname" class="field-label">–§–∞–º–∏–ª–∏—è</label>
          <app-input
            [error]="surname | controlError"
            id="surname"
            type="text"
            formControlName="lastName"
            placeholder="–ò–≤–∞–Ω–æ–≤"
          ></app-input>
          <div *ngIf="surname | controlError: 'required'" class="text-body-14 error">
            {{ errorMessage.VALIDATION_REQUIRED }}
          </div>
        </fieldset>
      </div>
      <fieldset *ngIf="registerForm.get('birthday') as birthday" class="auth__field">
        <label for="birthday" class="field-label">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
        <app-input
          id="birthday"
          [error]="birthday | controlError"
          type="text"
          mask="00.00.0000"
          placeholder="–î–î.–ú–ú.–ì–ì–ì–ì"
          formControlName="birthday"
        ></app-input>
        <div *ngIf="birthday | controlError: 'required'" class="text-body-14 error">
          {{ errorMessage.VALIDATION_REQUIRED }}
        </div>
        <div *ngIf="birthday | controlError: 'tooYoung'" class="text-body-14 error">
          {{ errorMessage.MINIMAL_AGE }} {{ birthday.errors?.tooYoung.requiredAge }} –ª–µ—Ç
        </div>
        <div *ngIf="birthday | controlError: 'invalidDateFormat'" class="text-body-14 error">
          {{ errorMessage.INVALID_DATE }}
        </div>
      </fieldset>
    </ng-container>
    <div *ngIf="userExistError" class="text-body-14 error">
      {{ errorMessage.AUTH_EMAIL_EXIST }}
    </div>
    <div class="register__agreement" *ngIf="step === 'credentials'">
      <app-checkbox [(checked)]="registerAgreement"></app-checkbox>
      <span (click)="registerAgreement = !registerAgreement">
        –Ø –ø—Ä–æ—á–∏—Ç–∞–ª 
        <a href="/assets/downloads/auth/shared/–ü–æ–ª–∏—Ç–∏–∫–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏_–ø–µ—Ä—Å_–¥–∞–Ω–Ω—ã—Ö_2022.docx" download>
          —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ
        </a>
        –∏ –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞&nbsp;–æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö&nbsp;–¥–∞–Ω–Ω—ã—Ö
      </span>
    </div>
    <app-button
      *ngIf="step === 'info'"
      [loader]="registerIsSubmitting"
      type="submit"
      class="auth__button"
    >
      –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
    </app-button>
    <app-button 
      *ngIf="step === 'credentials'" 
      type="submit" 
      class="auth__button"
      customTypographyClass="auth__button-typography"
    >
      –î–∞–ª–µ–µ
    </app-button>
    <p class="auth__toggle">–ï—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a routerLink="/auth/login">–í–æ–π–¥–∏—Ç–µ</a></p>
  </form>
</div>
