<!-- @format -->

<div class="nav-bar">
  <div class="nav-bar__inner">
    <h1 class="text-heading-1 nav-bar__title">{{ title }}</h1>
    <div class="nav-bar__toggle">
      <i
        appIcon
        [icon]="mobileMenuOpen ? 'menu-cross' : 'menu-burger'"
        appSquare="40"
        (click)="mobileMenuOpen = !mobileMenuOpen"
      >
      </i>
      <div
        class="attention"
        *ngIf="((notificationService.hasNotifications | async) || hasInvites) && !mobileMenuOpen"
      ></div>
    </div>
  </div>
  <div *ngIf="mobileMenuOpen" class="nav-bar__mobile-menu">
    <div class="nav-bar__top">
      <a class="nav-bar__mobile-logo" href="https://procollab.ru/" target="_blank">
        <img src="/assets/images/shared/logo.svg" alt="procollab" width="125px" />
      </a>
      <div
        class="nav-bar__notifications-toggle"
        [class.nav-bar__notifications-toggle--active]="notificationsOpen"
        (click)="notificationsOpen = !notificationsOpen"
      >
        <i appIcon icon="bell" appWidth="20" appHeight="22" appViewBox="0 0 20 22"></i>
        <div
          class="attention"
          *ngIf="(notificationService.hasNotifications | async) || hasInvites"
        ></div>
      </div>
    </div>
    <nav *ngIf="!notificationsOpen" class="nav nav--vertical">
      <ul class="nav__list">
        <a class="nav__link" routerLink="projects" routerLinkActive="nav__link--active">
          <li class="text-body-14 nav__item">
            <i appIcon icon="projects" appSquare="24"></i>
            Проекты
          </li>
        </a>
        <a class="nav__link" routerLink="program" routerLinkActive="nav__link--active">
          <li class="text-body-14 nav__item">
            <i appIcon icon="projects" appSquare="24"></i>
            Программы
          </li>
        </a>
        <a class="nav__link" routerLink="members" routerLinkActive="nav__link--active">
          <li class="text-body-14 nav__item">
            <i appIcon icon="people" appSquare="24"></i>
            Участники
          </li>
        </a>
        <a class="nav__link" routerLink="mentors" routerLinkActive="nav__link--active">
          <li class="text-body-14 nav__item">
            <i appIcon icon="people" appSquare="24"></i>
            Менторы
          </li>
        </a>
      </ul>
    </nav>
    <div *ngIf="notificationsOpen">
      <h3 class="text-bold-body-16 notifications__title">Уведомления</h3>
      <ul class="notifications__invites">
        <li *ngFor="let invite of invites" class="notifications__invite">
          <app-invite-manage-card
            [invite]="invite"
            (accept)="onAcceptInvite($event)"
            (reject)="onRejectInvite($event)"
          ></app-invite-manage-card>
        </li>
      </ul>
    </div>
    <app-profile-info
      class="nav-bar__profile"
      *ngIf="authService.profile | async as user"
      [user]="user"
    ></app-profile-info>
  </div>
</div>
